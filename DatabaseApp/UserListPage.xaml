<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:DatabaseApp.ViewModels"
             x:Class="DatabaseApp.UserListPage"
             Title="Users List">
    
    <Grid Padding="20" RowSpacing="10" RowDefinitions="Auto,Auto,*">
        <Entry Placeholder="Name contains..." Text="{Binding FilterName}" Grid.Row="0"/>

        <HorizontalStackLayout Grid.Row="1" Spacing="10">
            <Entry Placeholder="Min Age" Text="{Binding FilterMinAge}" Keyboard="Numeric"/>
            <Entry Placeholder="Max Age" Text="{Binding FilterMaxAge}" Keyboard="Numeric"/>
            <Button Text="Apply Filters" Command="{Binding ApplyFilterCommand}"/>
            <Button Text="Clear Filters" Command="{Binding ClearFilterCommand}"/>
        </HorizontalStackLayout>
        
        <CollectionView ItemsSource="{Binding Users}" Grid.Row="2"
                    SelectionMode="None">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid ColumnDefinitions="*,Auto,Auto" Padding="5">
                        <HorizontalStackLayout Grid.Column="0" Spacing="10" VerticalOptions="Center">
                            <Label Text="{Binding Name}" 
                               FontSize="16" 
                               VerticalOptions="Center"/>
                            <Label Text="{Binding Age}" 
                               FontSize="16" 
                               VerticalOptions="Center"/>
                        </HorizontalStackLayout>

                        <Button Grid.Column="1"
                            Text="âœ"
                            FontSize="18"
                            BackgroundColor="Transparent"
                            TextColor="#4CAF50"
                            Command="{Binding Source={RelativeSource AncestorType={x:Type viewModels:UserListViewModel}}, Path=EditUserCommand}"
                            CommandParameter="{Binding .}"/>

                        <Button Grid.Column="2"
                            Text="ðŸ—‘"
                            FontSize="18"
                            BackgroundColor="Transparent"
                            TextColor="#F44336"
                            Command="{Binding Source={RelativeSource AncestorType={x:Type viewModels:UserListViewModel}}, Path=DeleteUserCommand}"
                            CommandParameter="{Binding .}" />
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </Grid>

</ContentPage>